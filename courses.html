<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¯¾ç¨‹ç®¡ç† - ä¸ªäººç½‘ç«™</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .upload-area {
            width: 100%;
            height: 150px;
            border: 3px dashed #3498db;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
            cursor: pointer;
            margin: 10px 0;
            transition: all 0.3s ease;
            flex-direction: column;
        }
        .upload-area:hover {
            background: #e3f2fd;
            border-color: #2196f3;
        }
        .edit-area {
            padding: 8px;
            margin: 5px 0;
            border: 2px dashed #4caf50;
            border-radius: 5px;
            background: #f1f8e9;
            cursor: text;
        }
        .edit-area:hover {
            background: #dcedc8;
        }
        .course-card {
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .btn {
            background: #2196f3;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            transition: background 0.3s ease;
        }
        .btn:hover {
            background: #1976d2;
        }
        .btn-danger {
            background: #f44336;
        }
        .btn-danger:hover {
            background: #d32f2f;
        }
        .file-item {
            background: #f5f5f5;
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .file-icon {
            margin-right: 10px;
            font-size: 20px;
        }
        .success-message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #4caf50;
            color: white;
            padding: 15px 20px;
            border-radius: 5px;
            display: none;
            z-index: 1000;
        }
        .help-text {
            background: #fff3cd;
            border: 2px solid #ffc107;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
        }
        .course-meta {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>ä¸ªäººå“ç‰Œ</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">é¦–é¡µ</a></li>
                <li><a href="about.html">å…³äºæˆ‘</a></li>
                <li><a href="portfolio.html">ä½œå“é›†</a></li>
                <li><a href="skills.html">æŠ€èƒ½æœåŠ¡</a></li>
                <li><a href="courses.html" class="active">è¯¾ç¨‹ç®¡ç†</a></li>
                <li><a href="resume.html">å±¥å†</a></li>
                <li><a href="blog.html">åšå®¢</a></li>
                <li><a href="contact.html">è”ç³»æˆ‘</a></li>
            </ul>
        </div>
    </nav>

    <!-- æˆåŠŸæç¤º -->
    <div id="successMessage" class="success-message">âœ… æ“ä½œæˆåŠŸï¼</div>

    <!-- é¡µé¢å¤´éƒ¨ -->
    <header class="page-header">
        <h1>è¯¾ç¨‹ç®¡ç†</h1>
        <p>ä¸Šä¼ å’Œç®¡ç†æ‚¨çš„è¯¾ç¨‹å†…å®¹</p>
    </header>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="page-content">
        <div class="container">
            <!-- ä½¿ç”¨æŒ‡å— -->
            <div class="help-text">
                <h3>ğŸ¯ ä½¿ç”¨æŒ‡å—</h3>
                <ul>
                    <li><strong>ä¸Šä¼ è¯¾ç¨‹ææ–™ï¼š</strong>ç‚¹å‡»è“è‰²è™šçº¿åŒºåŸŸä¸Šä¼ è¯¾ç¨‹æ–‡ä»¶ï¼ˆæ”¯æŒå›¾ç‰‡ã€PDFã€æ–‡æ¡£ç­‰ï¼‰</li>
                    <li><strong>ç¼–è¾‘è¯¾ç¨‹ä¿¡æ¯ï¼š</strong>ç›´æ¥åœ¨ç»¿è‰²è¾¹æ¡†çš„æ–‡æœ¬æ¡†ä¸­è¾“å…¥å†…å®¹</li>
                    <li><strong>ä¿å­˜å†…å®¹ï¼š</strong>æ‰€æœ‰å†…å®¹è‡ªåŠ¨ä¿å­˜åˆ°æµè§ˆå™¨</li>
                    <li><strong>æ·»åŠ è¯¾ç¨‹ï¼š</strong>ç‚¹å‡»"â• æ·»åŠ æ–°è¯¾ç¨‹"æŒ‰é’®</li>
                </ul>
            </div>

            <!-- è¯¾ç¨‹å±•ç¤º -->
            <section class="section">
                <h2>æˆ‘çš„è¯¾ç¨‹</h2>
                
                <!-- è¯¾ç¨‹1 -->
                <div class="course-card">
                    <h3>è¯¾ç¨‹ 1</h3>
                    
                    <!-- è¯¾ç¨‹ä¿¡æ¯ -->
                    <div class="course-meta">
                        <div>
                            <strong>è¯¾ç¨‹åç§°ï¼š</strong>
                            <div contenteditable="true" class="edit-area" onblur="saveContent('course1_title', this.textContent)">Webå¼€å‘åŸºç¡€</div>
                        </div>
                        <div>
                            <strong>è¯¾ç¨‹æ—¶é•¿ï¼š</strong>
                            <div contenteditable="true" class="edit-area" onblur="saveContent('course1_duration', this.textContent)">4å‘¨</div>
                        </div>
                        <div>
                            <strong>è¯¾ç¨‹éš¾åº¦ï¼š</strong>
                            <div contenteditable="true" class="edit-area" onblur="saveContent('course1_level', this.textContent)">åˆçº§</div>
                        </div>
                        <div>
                            <strong>æˆè¯¾æ–¹å¼ï¼š</strong>
                            <div contenteditable="true" class="edit-area" onblur="saveContent('course1_method', this.textContent)">åœ¨çº¿ç›´æ’­</div>
                        </div>
                    </div>
                    
                    <!-- è¯¾ç¨‹æè¿° -->
                    <div>
                        <strong>è¯¾ç¨‹æè¿°ï¼š</strong>
                        <div contenteditable="true" class="edit-area" style="min-height: 80px;" onblur="saveContent('course1_desc', this.textContent)">æœ¬è¯¾ç¨‹å°†ä»‹ç»Webå¼€å‘çš„åŸºç¡€çŸ¥è¯†ï¼ŒåŒ…æ‹¬HTMLã€CSSå’ŒJavaScriptç­‰æ ¸å¿ƒæŠ€æœ¯ã€‚</div>
                    </div>
                    
                    <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
                    <div>
                        <strong>è¯¾ç¨‹ææ–™ï¼š</strong>
                        <div class="upload-area" onclick="document.getElementById('fileUpload1').click()">
                            <span id="filePreview1">ğŸ“ ç‚¹å‡»ä¸Šä¼ è¯¾ç¨‹æ–‡ä»¶</span>
                            <small style="margin-top: 5px; color: #666;">æ”¯æŒå›¾ç‰‡ã€PDFã€æ–‡æ¡£ç­‰å¤šç§æ ¼å¼</small>
                        </div>
                        <input type="file" id="fileUpload1" multiple accept="image/*,.pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.zip" style="display: none;" onchange="handleFileUpload(1)">
                        <div id="fileList1"></div>
                    </div>
                    
                    <button class="btn btn-danger" onclick="deleteCourse(1)">ğŸ—‘ï¸ åˆ é™¤è¯¾ç¨‹</button>
                </div>

                <!-- æ·»åŠ è¯¾ç¨‹æŒ‰é’® -->
                <div style="text-align: center; margin: 30px 0;">
                    <button class="btn" onclick="addNewCourse()">â• æ·»åŠ æ–°è¯¾ç¨‹</button>
                </div>
            </section>
        </div>
    </main>

    <!-- é¡µè„š -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 ä¸ªäººç½‘ç«™. ä¿ç•™æ‰€æœ‰æƒåˆ©.</p>
            <p><a href="privacy.html">éšç§æ”¿ç­–</a> | <a href="sitemap.html">ç«™ç‚¹åœ°å›¾</a></p>
        </div>
    </footer>

    <script>
        // å¤„ç†æ–‡ä»¶ä¸Šä¼ 
        function handleFileUpload(courseId) {
            const fileInput = document.getElementById('fileUpload' + courseId);
            const files = Array.from(fileInput.files);
            const fileList = document.getElementById('fileList' + courseId);
            
            files.forEach(file => {
                // è¯»å–æ–‡ä»¶ä¸ºDataURL
                const reader = new FileReader();
                reader.onload = function(e) {
                    // åˆ›å»ºæ–‡ä»¶é¡¹
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    
                    // æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©å›¾æ ‡
                    let fileIcon = 'ğŸ“„';
                    if (file.type.startsWith('image/')) {
                        fileIcon = 'ğŸ–¼ï¸';
                    } else if (file.type === 'application/pdf') {
                        fileIcon = 'ğŸ“Š';
                    } else if (file.type.includes('document')) {
                        fileIcon = 'ğŸ“';
                    } else if (file.type.includes('presentation')) {
                        fileIcon = 'ğŸ¬';
                    } else if (file.type.includes('spreadsheet')) {
                        fileIcon = 'ğŸ“ˆ';
                    } else if (file.type === 'application/zip') {
                        fileIcon = 'ğŸ“¦';
                    }
                    
                    fileItem.innerHTML = `
                        <div style="display: flex; align-items: center;">
                            <span class="file-icon">${fileIcon}</span>
                            <span>${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                        </div>
                        <button onclick="deleteFile(this, ${courseId}, '${file.name}')" style="background: none; border: none; color: #f44336; cursor: pointer;">âŒ</button>
                    `;
                    
                    fileList.appendChild(fileItem);
                    
                    // ä¿å­˜æ–‡ä»¶åˆ°localStorage
                    const courseFiles = JSON.parse(localStorage.getItem('courseFiles' + courseId) || '[]');
                    courseFiles.push({
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        data: e.target.result
                    });
                    localStorage.setItem('courseFiles' + courseId, JSON.stringify(courseFiles));
                    
                    showSuccess('âœ… æ–‡ä»¶ä¸Šä¼ æˆåŠŸï¼');
                };
                
                // å¯¹äºå°æ–‡ä»¶ç›´æ¥è¯»å–ï¼Œå¤§æ–‡ä»¶å¯ä»¥è€ƒè™‘å…¶ä»–æ–¹å¼
                if (file.size < 10 * 1024 * 1024) { // 10MBä»¥ä¸‹
                    reader.readAsDataURL(file);
                } else {
                    // å¤§æ–‡ä»¶å¯ä»¥åªä¿å­˜æ–‡ä»¶åå’ŒåŸºæœ¬ä¿¡æ¯
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.innerHTML = `
                        <div style="display: flex; align-items: center;">
                            <span class="file-icon">ğŸ“„</span>
                            <span>${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                        </div>
                        <button onclick="deleteFile(this, ${courseId}, '${file.name}')" style="background: none; border: none; color: #f44336; cursor: pointer;">âŒ</button>
                    `;
                    fileList.appendChild(fileItem);
                    
                    const courseFiles = JSON.parse(localStorage.getItem('courseFiles' + courseId) || '[]');
                    courseFiles.push({
                        name: file.name,
                        type: file.type,
                        size: file.size,
                        data: null
                    });
                    localStorage.setItem('courseFiles' + courseId, JSON.stringify(courseFiles));
                    
                    showSuccess('âœ… æ–‡ä»¶ä¿¡æ¯å·²ä¿å­˜ï¼');
                }
            });
            
            // æ¸…ç©ºæ–‡ä»¶è¾“å…¥ï¼Œä»¥ä¾¿å¯ä»¥å†æ¬¡é€‰æ‹©ç›¸åŒçš„æ–‡ä»¶
            fileInput.value = '';
        }
        
        // ä¿å­˜æ–‡å­—å†…å®¹
        function saveContent(key, content) {
            localStorage.setItem(key, content);
            showSuccess('âœ… å†…å®¹å·²ä¿å­˜ï¼');
        }
        
        // åˆ é™¤æ–‡ä»¶
        function deleteFile(button, courseId, fileName) {
            // ä»DOMä¸­åˆ é™¤æ–‡ä»¶é¡¹
            button.closest('.file-item').remove();
            
            // ä»localStorageä¸­åˆ é™¤æ–‡ä»¶
            const courseFiles = JSON.parse(localStorage.getItem('courseFiles' + courseId) || '[]');
            const updatedFiles = courseFiles.filter(file => file.name !== fileName);
            localStorage.setItem('courseFiles' + courseId, JSON.stringify(updatedFiles));
            
            showSuccess('âœ… æ–‡ä»¶å·²åˆ é™¤ï¼');
        }
        
        // åˆ é™¤è¯¾ç¨‹
        function deleteCourse(courseId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¯¾ç¨‹å—ï¼Ÿ')) {
                const courseCard = event.target.closest('.course-card');
                courseCard.remove();
                
                // æ¸…é™¤ç›¸å…³çš„localStorageæ•°æ®
                const keys = Object.keys(localStorage);
                keys.forEach(key => {
                    if (key.includes('course' + courseId)) {
                        localStorage.removeItem(key);
                    }
                });
                
                showSuccess('âœ… è¯¾ç¨‹å·²åˆ é™¤ï¼');
            }
        }
        
        // æ·»åŠ æ–°è¯¾ç¨‹
        function addNewCourse() {
            const courseList = document.querySelector('.section');
            const courseCount = courseList.querySelectorAll('.course-card').length + 1;
            
            const newCourse = document.createElement('div');
            newCourse.className = 'course-card';
            newCourse.innerHTML = `
                <h3>è¯¾ç¨‹ ${courseCount}</h3>
                
                <!-- è¯¾ç¨‹ä¿¡æ¯ -->
                <div class="course-meta">
                    <div>
                        <strong>è¯¾ç¨‹åç§°ï¼š</strong>
                        <div contenteditable="true" class="edit-area" onblur="saveContent('course${courseCount}_title', this.textContent)">æ–°è¯¾ç¨‹åç§°</div>
                    </div>
                    <div>
                        <strong>è¯¾ç¨‹æ—¶é•¿ï¼š</strong>
                        <div contenteditable="true" class="edit-area" onblur="saveContent('course${courseCount}_duration', this.textContent)">4å‘¨</div>
                    </div>
                    <div>
                        <strong>è¯¾ç¨‹éš¾åº¦ï¼š</strong>
                        <div contenteditable="true" class="edit-area" onblur="saveContent('course${courseCount}_level', this.textContent)">åˆçº§</div>
                    </div>
                    <div>
                        <strong>æˆè¯¾æ–¹å¼ï¼š</strong>
                        <div contenteditable="true" class="edit-area" onblur="saveContent('course${courseCount}_method', this.textContent)">åœ¨çº¿ç›´æ’­</div>
                    </div>
                </div>
                
                <!-- è¯¾ç¨‹æè¿° -->
                <div>
                    <strong>è¯¾ç¨‹æè¿°ï¼š</strong>
                    <div contenteditable="true" class="edit-area" style="min-height: 80px;" onblur="saveContent('course${courseCount}_desc', this.textContent)">è¯·è¾“å…¥è¯¾ç¨‹æè¿°...</div>
                </div>
                
                <!-- æ–‡ä»¶ä¸Šä¼ åŒºåŸŸ -->
                <div>
                    <strong>è¯¾ç¨‹ææ–™ï¼š</strong>
                    <div class="upload-area" onclick="document.getElementById('fileUpload${courseCount}').click()">
                        <span id="filePreview${courseCount}">ğŸ“ ç‚¹å‡»ä¸Šä¼ è¯¾ç¨‹æ–‡ä»¶</span>
                        <small style="margin-top: 5px; color: #666;">æ”¯æŒå›¾ç‰‡ã€PDFã€æ–‡æ¡£ç­‰å¤šç§æ ¼å¼</small>
                    </div>
                    <input type="file" id="fileUpload${courseCount}" multiple accept="image/*,.pdf,.doc,.docx,.ppt,.pptx,.xls,.xlsx,.zip" style="display: none;" onchange="handleFileUpload(${courseCount})">
                    <div id="fileList${courseCount}"></div>
                </div>
                
                <button class="btn btn-danger" onclick="deleteCourse(${courseCount})")">ğŸ—‘ï¸ åˆ é™¤è¯¾ç¨‹</button>
            `;
            
            // æ’å…¥åˆ°æ·»åŠ æŒ‰é’®ä¹‹å‰
            const addButton = document.querySelector('.btn');
            courseList.insertBefore(newCourse, addButton.parentElement);
            
            showSuccess('âœ… æ–°è¯¾ç¨‹å·²æ·»åŠ ï¼');
        }
        
        // æ˜¾ç¤ºæˆåŠŸæç¤º
        function showSuccess(message) {
            const successDiv = document.getElementById('successMessage');
            successDiv.textContent = message;
            successDiv.style.display = 'block';
            
            setTimeout(() => {
                successDiv.style.display = 'none';
            }, 3000);
        }
        
        // é¡µé¢åŠ è½½æ—¶æ¢å¤æ•°æ®
        window.onload = function() {
            const courseCards = document.querySelectorAll('.course-card');
            courseCards.forEach((card, index) => {
                const courseId = index + 1;
                
                // æ¢å¤æ–‡å­—å†…å®¹
                const title = localStorage.getItem('course' + courseId + '_title');
                if (title) {
                    card.querySelector('.edit-area').textContent = title;
                }
                
                // æ¢å¤æ–‡ä»¶åˆ—è¡¨
                const courseFiles = JSON.parse(localStorage.getItem('courseFiles' + courseId) || '[]');
                const fileList = card.querySelector('#fileList' + courseId);
                
                courseFiles.forEach(file => {
                    // æ ¹æ®æ–‡ä»¶ç±»å‹é€‰æ‹©å›¾æ ‡
                    let fileIcon = 'ğŸ“„';
                    if (file.type.startsWith('image/')) {
                        fileIcon = 'ğŸ–¼ï¸';
                    } else if (file.type === 'application/pdf') {
                        fileIcon = 'ğŸ“Š';
                    } else if (file.type.includes('document')) {
                        fileIcon = 'ğŸ“';
                    } else if (file.type.includes('presentation')) {
                        fileIcon = 'ğŸ¬';
                    } else if (file.type.includes('spreadsheet')) {
                        fileIcon = 'ğŸ“ˆ';
                    } else if (file.type === 'application/zip') {
                        fileIcon = 'ğŸ“¦';
                    }
                    
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-item';
                    fileItem.innerHTML = `
                        <div style="display: flex; align-items: center;">
                            <span class="file-icon">${fileIcon}</span>
                            <span>${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)</span>
                        </div>
                        <button onclick="deleteFile(this, ${courseId}, '${file.name}')" style="background: none; border: none; color: #f44336; cursor: pointer;">âŒ</button>
                    `;
                    
                    fileList.appendChild(fileItem);
                });
            });
        };
    </script>
</body>
</html>